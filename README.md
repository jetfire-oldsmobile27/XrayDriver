# –î—Ä–∞–π–≤–µ—Ä —Ä–µ–Ω—Ç–≥–µ–Ω–æ–≤—Å–∫–æ–π —Ç—Ä—É–±–∫–∏

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–Ω—Ç–≥–µ–Ω–æ–≤—Å–∫–æ–π —Ç—Ä—É–±–∫–æ–π —á–µ—Ä–µ–∑ REST API —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π COM-–ø–æ—Ä—Ç–∞.

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- Conan 1.60+
- CMake 3.12+
- –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π C++17

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ Conan:
```bash
mkdir build && cd build
conan install .. --build=missing
```

2. –°–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç:
```bash
cmake .. -DCMAKE_BUILD_TYPE=Release
cmake --build .
```

## üöÄ –ó–∞–ø—É—Å–∫
**–û–±—ã—á–Ω—ã–π —Ä–µ–∂–∏–º:**
```bash
sudo ./build/xray_driver
```

**–†–µ–∂–∏–º –¥–µ–º–æ–Ω–∞:**
```bash
sudo ./build/xray_driver --daemon
```

## üåê REST API
–ë–∞–∑–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è
```bash
curl -X POST http://localhost:8080/api/voltage \
  -H "Content-Type: application/json" \
  -d '{"voltage": 150}'
```
- `voltage`: –ó–Ω–∞—á–µ–Ω–∏–µ –≤ –∫–í (50-200)

### –°—Ç–∞—Ä—Ç —ç–∫—Å–ø–æ–∑–∏—Ü–∏–∏
```bash
curl -X POST http://localhost:8080/api/exposure \
  -H "Content-Type: application/json" \
  -d '{"duration_ms": 500}'
```
- `duration_ms`: –í—Ä–µ–º—è –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö (100-5000)

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```bash
curl http://localhost:8080/api/status
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:
- –ü–æ—Ä—Ç: `/dev/ttyXR0`
- –°–∫–æ—Ä–æ—Å—Ç—å: 38400 –±–æ–¥
- HTTP-–ø–æ—Ä—Ç: 8080

–î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `config.json`.

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞
–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ COM-–ø–æ—Ä—Ç:
```bash
sudo chmod 666 /dev/ttyXR0
```

2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–æ—Ä—Ç —Å–≤–æ–±–æ–¥–µ–Ω:
```bash
lsof /dev/ttyXR0
```

3. –õ–æ–≥–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `/var/log/xray_driver.log`